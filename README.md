<p align="center">
  <img src="https://simpleicons.org/icons/dotnet.svg" style="filter:invert(1);" width="100" alt="project-logo">
</p>
<p align="center">
    <h1 align="center">MOVIESAPI</h1>
</p>
<p align="center">
    <em>MoviesAPI – ¡Desarrollo simplificado, pruebas optimizadas!** Al abrazar las complejidades de la solución configurable de MoviesAPI (MoviesApi.sln), el entorno de ejecución de pruebas simplificado (configuración de pruebas unitarias de JetBrains dentro de la solución de Visual Studio, MoviesApi.sln.DotSettings.user) y la gestión automatizada de la base de datos de pruebas (LocalDbDatabaseInitializer.cs), estás listo para conquistar el mundo del cine con nuestro robusto y eficiente ecosistema de API. Además, los archivos BaseTests.cs con configuración de contexto estandarizada utilizando bases de datos en memoria, AutoMapper y manejadores de autorización personalizados, simplifican las pruebas en todo el proyecto MoviesApi, ¡asegurando que tu experiencia cinematográfica siempre sea de primera categoría! 🍿🎬</em>
</p>
<p align="center">
	<img src="https://img.shields.io/github/license/juansdev/moviesapi?style=default&logo=opensourceinitiative&logoColor=white&color=0080ff" alt="license">
	<img src="https://img.shields.io/github/last-commit/juansdev/moviesapi?style=default&logo=git&logoColor=white&color=0080ff" alt="last-commit">
	<img src="https://img.shields.io/github/languages/top/juansdev/moviesapi?style=default&color=0080ff" alt="repo-top-language">
	<img src="https://img.shields.io/github/languages/count/juansdev/moviesapi?style=default&color=0080ff" alt="repo-language-count">
<p>
<p align="center">
	<!-- default option, no dependency badges. -->
</p>

<br><!-- TABLA DE CONTENIDO -->
<details>
  <summary>Tabla de Contenidos</summary><br>

- [Visión General](#-visión-general)
- [Características](#-características)
- [Estructura del Repositorio](#-estructura-del-repositorio)
- [Módulos](#-módulos)
- [Primeros Pasos](#-primeros-pasos)
  - [Instalación](#-instalación)
  - [Uso](#-uso)
  - [Pruebas](#-pruebas)
</details>
<hr>

##  Visión General

El `moviesapi` es un proyecto de software robusto, desarrollado principalmente en C# con .NET Core para construir una API para la gestión de datos de películas. El archivo central de la solución, `MoviesApi.sln`, sirve como el plano, coordinando las configuraciones tanto para la aplicación principal como para su correspondiente conjunto de pruebas. Esta configuración dual facilita una línea de desarrollo de software sin problemas a través de los modos de desarrollo y pruebas—Debug y Release—dentro del ecosistema de MoviesApi.

El archivo `MoviesApi.sln.DotSettings.user` configura el entorno de pruebas unitarias de JetBrains dentro de la solución de Visual Studio, habilitando la ejecución continua de pruebas tanto en pruebas individuales en `MoviesApi.Tests` como en toda la solución. Esto permite iteraciones rápidas en la escritura y validación de nuevas características de código.

Para pruebas de integración eficientes, se implementa un inicializador de base de datos personalizado `LocalDbDatabaseInitializer.cs`, que inicializa, mantiene y destruye bases de datos de prueba según sea necesario. Con la capacidad de recrear una base de datos con un esquema predefinido al inicio y limpiarla al finalizar, esta utilidad simplifica las pruebas de interacciones complejas entre componentes dentro de la API.

Una base compartida para las funciones de prueba es establecida por el archivo `BaseTests.cs`, que define escenarios esenciales utilizando una base de datos en memoria, AutoMapper y manejadores de autorización personalizados. Al crear contextos y configuraciones estandarizadas, esta base simplifica la creación de pruebas consistentes en diversas funcionalidades dentro de la API.

Por último, la configuración del proyecto de pruebas—`MoviesApi.Tests.csproj`.

---

##  Características

| Característica     | Descripción                                                                                      |
|-------------------|--------------------------------------------------------------------------------------------------|
| ⚙️  **Arquitectura** | Utiliza .NET Core con una estructura de proyecto Web API, adhiriéndose a los principios SOLID y APIs RESTful para una gestión eficiente de recursos y extensibilidad.                |
| 🔩 **Calidad del Código** | El proyecto exhibe buenos estándares de codificación, incluyendo nombres de variables significativos, componentes modulares y uso efectivo de namespaces. El código está bien documentado con comentarios XML y JSDoc para mayor claridad.                            |
| 📄 **Documentación** | Documentación completa en forma de README, comentarios en el código y secciones de Wiki que proporcionan explicaciones claras sobre la estructura del proyecto, su propósito, dependencias e instrucciones de uso.         |
| 🔌 **Integraciones** | Utiliza AutoMapper para una mapeo sin problemas entre modelos, Entity Framework Core para acceso a datos y gestión de bases de datos, y Swagger para generar documentación de la API.                           |
| 🧩 **Modularidad**    | El diseño modular del proyecto permite un fácil mantenimiento, escalabilidad y extensibilidad al separar diferentes funcionalidades en archivos y namespaces. Cada componente sirve a un propósito distinto para un código limpio y organizado.       |
| 🧪 **Pruebas**       | Emplea MSTest, Moq y Microsoft Entity Framework en casos de prueba para verificar el comportamiento de la aplicación con mocking, validación de datos y pruebas de manipulación de datos. La configuración de pruebas incluye bases de datos en memoria para ciclos de prueba eficientes.        |
| ⚡️  **Rendimiento**   | Optimizado a través de mejoras de rendimiento de .NET Core y el uso de bases de datos de prueba en memoria para pruebas eficientes, reduciendo el uso potencial de recursos y mejorando la eficiencia general de la aplicación.          |
| 🛡️ **Seguridad**      | Utiliza manejadores de autorización personalizados para asegurar el acceso a los datos y la autenticación adecuada de los usuarios, así como cifrado para información sensible y funciones de validación para la sanitización de entradas.            |
| 📦 **Dependencias**  | Las dependencias principales incluyen el framework .NET Core, librerías de C#, archivos de solución de Visual Studio, JSON, TXT, archivos de texto y archivos de configuración específicos del usuario.                                         |

---

##  Estructura del Repositorio

```sh
└── moviesapi/
    ├── MoviesApi
    │   ├── ApplicationDbContext.cs
    │   ├── Controllers
    │   ├── Dependencias.txt
    │   ├── Dto
    │   ├── Entities
    │   ├── Helpers
    │   ├── Migrations
    │   ├── MoviesApi.csproj
    │   ├── Program.cs
    │   ├── Properties
    │   ├── Services
    │   ├── Startup.cs
    │   ├── Validations
    │   ├── appsettings.Development.json
    │   ├── appsettings.json
    │   └── wwwroot
    ├── MoviesApi.Tests
    │   ├── AllowAnonymousHandler.cs
    │   ├── BaseTests.cs
    │   ├── Dependencias.txt
    │   ├── IntegrationTests
    │   ├── LocalDbDatabaseInitializer.cs
    │   ├── MoviesApi.Tests.csproj
    │   ├── UnitTests
    │   └── UserFalseFilter.cs
    ├── MoviesApi.sln
    └── MoviesApi.sln.DotSettings.user
```

---

##  Módulos

<details closed><summary>.</summary>

| Archivo                                                                                                           | Resumen                                                                                                                                                                                                                                                                               |
| ---                                                                                                               | ---                                                                                                                                                                                                                                                                                   |
| [MoviesApi.sln](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.sln)                                   | Coordina las configuraciones para los proyectos MoviesApi y MoviesApi.Tests, permitiendo un desarrollo y prueba sin problemas en modo Debug o Release. Al coordinar estos ajustes, facilita un pipeline robusto de ingeniería de software dentro del ecosistema de MoviesApi.          |
| [MoviesApi.sln.DotSettings.user](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.sln.DotSettings.user) | Configura el entorno de pruebas unitarias de JetBrains dentro de la solución de Visual Studio para el proyecto MoviesApi, permitiendo la ejecución continua de pruebas tanto individuales en MoviesApi.Tests como de toda la solución.                                                  |

</details>

<details closed><summary>MoviesApi.Tests</summary>

| Archivo                                                                                                                           | Resumen                                                                                                                                                                                                                                                                                                                                                                       |
| ---                                                                                                                               | ---                                                                                                                                                                                                                                                                                                                                                                         |
| [LocalDbDatabaseInitializer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/LocalDbDatabaseInitializer.cs)   | Inicializa, mantiene y destruye bases de datos de prueba para la aplicación MoviesApi. Facilita pruebas de integración eficientes al recrear una base de datos con un esquema predefinido al inicio, poblándola si es necesario, y limpiándola al finalizar el conjunto de pruebas.                                                                                             |
| [BaseTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/BaseTests.cs)                                     | Este archivo BaseTests.cs sirve como base para las funciones de prueba dentro del proyecto MoviesApi al configurar escenarios de prueba compartidos utilizando una base de datos en memoria, AutoMapper y manejadores de autorización personalizados. Al crear contextos y configuraciones estandarizadas, facilita pruebas eficientes y consistentes en diferentes funcionalidades dentro de la API. |
| [MoviesApi.Tests.csproj](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/MoviesApi.Tests.csproj)                 | Esta configuración de proyecto configura MoviesApi.Tests, un conjunto de pruebas automatizadas que utilizan MSTest, Moq y Microsoft Entity Framework. Hace referencia al proyecto principal MoviesApi e integra bases de datos en memoria para validar las funcionalidades de la aplicación en un entorno de prueba aislado.                                                    |
| [AllowAnonymousHandler.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/AllowAnonymousHandler.cs)             | En el repositorio de MoviesApi, esta clase personalizada `AllowAnonymousHandler` facilita la omisión de la autorización para las pruebas dentro de la carpeta MoviesApi.Tests, permitiendo la ejecución fluida de pruebas independientemente de los requisitos de autorización establecidos en la arquitectura de la aplicación.                                               |
| [UserFalseFilter.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UserFalseFilter.cs)                         | Filtra al usuario personalizado dentro del entorno de prueba en MoviesApi, simulando datos de usuario para fines de pruebas aisladas. Esto promueve pruebas de integración seguras y consistentes, mejorando la estabilidad y robustez de la aplicación.                                                                                                                       |
| [Dependencias.txt](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/Dependencias.txt)                             | En este archivo relacionado con las pruebas dentro del proyecto MoviesApi, se declaran las dependencias clave para las operaciones de base de datos. Se incluyen el Proveedor de EntityFrameworkCore basado en memoria y Mock (para crear objetos simulados). Además, esta configuración habilita pruebas de integración con ASP.NET Core MVC para probar la API en un entorno similar al de producción.                        |

</details>

<details closed><summary>MoviesApi.Tests.IntegrationTests</summary>

| Archivo                                                                                                                                    | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---                                                                                                                                        | ---                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [GendersControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/IntegrationTests/GendersControllerTests.cs)   | Valida las funcionalidades de `GendersController` en escenarios de pruebas de integración de MoviesApi. Asegura la correcta recuperación y eliminación de géneros mediante llamadas a la API, verificando el conteo adecuado y el manejo de errores (401 Unauthorized) en caso de acceso no autorizado.                                                                                                                      |
| [ReviewsControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/IntegrationTests/ReviewsControllerTests.cs)   | Prueba la integración de `ReviewsController` dentro de MoviesApi, asegurando el manejo adecuado de películas inexistentes. Valida que una solicitud GET devuelva códigos de error 404 al intentar acceder a reseñas de películas inexistentes.                                                                                                                                                                                |

</details>

<details closed><summary>MoviesApi.Tests.UnitTests</summary>

| Archivo                                                                                                                                 | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---                                                                                                                                      | ---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [GendersControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/GendersControllerTests.cs)       | Prueba los puntos finales automatizados para el controlador de géneros de `MoviesApi`. Este archivo incluye varios métodos de prueba que verifican las funcionalidades correctas de GET, POST, PUT y DELETE para la gestión de géneros, asegurando respuestas correctas como códigos de estado exitosos y recuperación o creación de datos válidos.                                                                                                                                                  |
| [MoviesControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/MoviesControllerTests.cs)         | Prueba la funcionalidad de ordenación en la clase MoviesController para la aplicación ASP.NET. Dos pruebas aseguran el orden correcto por título ya sea ascendente o descendente, mientras que una tercera prueba valida un mensaje de error cuando se especifica un campo no válido. Las pruebas emplean las bibliotecas Moq y AutoMapper para la inyección de dependencias.                                                                                                                                 |
| [ReviewsControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/ReviewsControllerTests.cs)       | El archivo de prueba `ReviewsControllerTests` verifica la funcionalidad dentro de la aplicación MoviesApi para la presentación de reseñas. Específicamente, asegura que un usuario no pueda enviar múltiples reseñas para la misma película al garantizar que los envíos subsecuentes resulten en un estado de solicitud incorrecta (400). Además, valida la creación exitosa de una nueva reseña por otro usuario en la base de datos, manteniendo reseñas únicas por película.                        |
| [AuthorsControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/AuthorsControllerTests.cs)       | Asegura que un autor permanezca en la lista, sin tener una foto asignada inicialmente. 2. `CreateAuthorWithPhoto`: Crea con éxito un autor y guarda su foto en el almacenamiento de archivos, asegurando que se devuelva la respuesta HTTP correcta (Código: 201). 3. `PatchReturn404IfAuthorExist`: Los autores inexistentes devuelven el estado HTTP 404 como se espera cuando se parchean. 4. `PatchUpdateAFiled`: Actualiza el nombre del autor con éxito en la operación HTTP PATCH con el validador aplicado, y asegura la corrección de la entrada en la base de datos. |
| [AccountsControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/AccountsControllerTests.cs)     | Instancia `SignInManager` inicializando el administrador de usuarios, httpContext y datos de configuración. 2. Configura IdentityOptions con configuraciones de bloqueo personalizadas, simulando `UserManager` con configuración de validación de contraseña. 3. Construye `SignInManager` utilizando el `UserManager` instanciado, `HttpContextAccessor` simulado, opciones, fábrica de reclamaciones, etc. 4. Simula `IAuthenticationService` y agrega su instancia a la colección de servicios dentro del httpContext proporcionado.       |
| [CinemasControllerTests.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi.Tests/UnitTests/CinemasControllerTests.cs)       | Prueba cines dentro de un radio de 5 km desde una ubicación específica en la aplicación MoviesApi, asegurando resultados precisos a través del `CinemasController`. Las pruebas unitarias utilizan NetTopologySuite para manejar datos espaciales para consultas de ubicación precisas y validar el conteo de respuestas, garantizando la calidad del servicio de la API.                                                                                                                              |

</details>

<details closed><summary>MoviesApi</summary>

| Archivo                                                                                                                       | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ---                                                                                                                           | ---                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [appsettings.json](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/appsettings.json)                             | Configura los ajustes críticos de la aplicación para el proyecto MoviesApi. Principalmente aloja las preferencias de nivel de registro, la clave secreta JWT para una autenticación segura y la lista de hosts permitidos (establecida en * para acceso universal). Asegura una operación estable y segura dentro del ecosistema de MoviesApi.                                                                                                         |
| [MoviesApi.csproj](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/MoviesApi.csproj)                             | Esta configuración de proyecto configura una solución de MovieAPI con soporte para .NET 6.0, aprovechando herramientas como AutoMapper, Swagger y Microsoft Identity, JsonPatch, SQL Server y Entity Framework Core para operaciones de base de datos. El objetivo es crear un servicio de API de películas robusto, escalable y extensible.                                                                                                          |
| [Startup.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Startup.cs)                                         | Inicia y configura los servicios principales para la aplicación MoviesApi, gestionando dependencias, autenticación, contexto de base de datos y manejo de errores dentro del marco de trabajo .NET Core especificado. Las características clave incluyen autenticación con JWT Bearer, Identity, AutoMapper para mapeo de datos y conexión a SQL Server utilizando Entity Framework Core para operaciones de base de datos.                          |
| [Program.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Program.cs)                                         | Lanza la aplicación Movies API, aprovechando los archivos de configuración y servicios para orquestar operaciones de datos. Las características clave incluyen acceso a datos a través de Entity Framework, puntos finales de API RESTful a través de ASP.NET Core Web API y reglas de validación personalizadas para la integridad de los datos.                                                                                                    |
| [ApplicationDbContext.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/ApplicationDbContext.cs)               | Inicia la población de datos para las entidades Movie y Author con datos asociados de películas y autores, y las relaciones MovieGenders y MoviesAuthors, facilitando la gestión eficiente de entidades en un sistema de base de datos de películas.                                                                                                                                                             |
| [Dependencias.txt](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dependencias.txt)                             | Introduce las dependencias necesarias para SQLServer, comandos de migración, AutoMapper, Azure Storage, HTTP Patch, cadenas de ordenación, consultas especiales, marco de trabajo Identity y creación de tokens JWT utilizando las ofertas de Microsoft. Optimiza el código al proporcionar configuraciones y herramientas predefinidas para una experiencia de aplicación de API de películas fluida y eficiente.                                      |
| [appsettings.Development.json](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/appsettings.Development.json)     | Configura la conexión a la base de datos para el entorno de desarrollo, inicializando MoviesApi dentro de una instancia local de SQL Server. Además, configura los niveles de registro, gestionando el flujo de datos dentro de la aplicación.                                                                                                                                                                     |

</details>

<details closed><summary>MoviesApi.Services</summary>

| Archivo                                                                                                          | Resumen                                                                                                                                                                                                                                                                                                                      |
| ---                                                                                                              | ---                                                                                                                                                                                                                                                                                                                          |
| [FileStorageLocal.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Services/FileStorageLocal.cs)  | Gestiona el almacenamiento de archivos en el sistema local para la aplicación MoviesApi. El servicio FileStorageLocal garantiza que los archivos subidos se guarden en los contenedores apropiados dentro del directorio raíz web y proporciona métodos para editar y eliminar archivos según sea necesario, manteniendo una estructura de biblioteca digital organizada y eficiente. |
| [IFileStorage.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Services/IFileStorage.cs)          | Gestiona las operaciones de almacenamiento de archivos en la aplicación MoviesApi, proporcionando métodos para guardar, editar y eliminar archivos según su tipo, extensión y contenedor. Esta interfaz actúa como un contrato para implementar funcionalidades de almacenamiento de archivos en diferentes implementaciones de servicio.                                   |
| [FileStorageAzure.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Services/FileStorageAzure.cs)  | Simplifica el almacenamiento de archivos en Azure Blob Storage para la MoviesAPI. Maneja la creación, edición y eliminación de archivos, asegurando una gestión eficiente y organizada del contenido digital. Parte integral de la arquitectura general de MoviesAPI, simplificando los procesos de almacenamiento y manejo de datos.                               |

</details>

<details closed><summary>MoviesApi.Entities</summary>

| Archivo                                                                                                     | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ---                                                                                                         | ---                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [Review.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/Review.cs)                 | En el proyecto MoviesApi, esta entidad Review sirve como la piedra angular para la retroalimentación de los usuarios, capturando tanto comentarios como calificaciones asignadas a películas específicas. También mantiene conexiones con los usuarios autenticados que publican las reseñas y sus entradas de películas relacionadas. Al crear un diálogo estructurado entre usuarios y películas, mejora la interactividad dentro de la aplicación, enriqueciendo las experiencias generales de los usuarios. |
| [MoviesCinemas.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/MoviesCinemas.cs)   | Este archivo crea la clase modelo `MoviesCinemas` dentro de la arquitectura de MoviesApi, vinculando películas con cines por sus respectivos IDs y habilitando la integridad de datos a través de propiedades de navegación hacia las entidades Movie y Cinema. La conexión facilita la organización de las películas disponibles en varios cines, esencial para una experiencia de usuario sin interrupciones en aplicaciones de exploración de películas.                           |
| [Gender.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/Gender.cs)                 | Gestiona y organiza los datos de género dentro de la base de datos de MoviesApi definiendo entidades Gender, permitiendo una integración sin problemas entre géneros y registros de películas asociados a través de la propiedad MoviesGenders list. Esto promueve una organización eficiente de la estructura de datos para una experiencia de usuario simplificada cuando se trabaja con nuestro repositorio de películas.                                                                                  |
| [Movie.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/Movie.cs)                   | Gestiona entidades Movie dentro de la aplicación MoviesApi. Cada entidad incluye título, estado InTheaters, fecha de estreno, póster, múltiples asociaciones con autores, géneros y cines, y un ID único. Esta clase es instrumental para mantener la persistencia y recuperación de datos de películas en la base de datos de la aplicación.                                                                                                      |
| [Author.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/Author.cs)                 | En el repositorio MoviesApi, esta clase de entidad Author almacena datos esenciales de un autor. Captura atributos del autor como nombre, fecha de nacimiento y foto, manteniendo una relación con películas a través del objeto MoviesAuthors. Esta estructuración ayuda a crear y gestionar autores en el contexto de la aplicación de API de películas.                                                                        |
| [IId.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/IId.cs)                       | Facilita la identificación de datos en todas las entidades dentro de la aplicación MoviesApi, implementando un sistema de Id unificado para una gestión y navegación de datos sin problemas en la base de datos de películas.                                                                                                                                                                                                                               |
| [MoviesGenders.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/MoviesGenders.cs)   | Gestiona asociaciones entre películas y sus respectivos géneros dentro de la aplicación MoviesAPI, simplificando el modelado de datos para experiencias de usuario sin problemas.                                                                                                                                                                                                                                                       |
| [Cinema.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/Cinema.cs)                 | En este repositorio, la clase Cinema dentro del directorio Entities de MoviesApi sirve como una estructura de datos vital. Modela un cine, almacenando su nombre y ubicación mediante coordenadas geográficas. Cada cine está asociado con múltiples películas que muestra a través de la relación `MoviesCinemas`, enriqueciendo la funcionalidad de descubrimiento de películas de la aplicación.                                                               |
| [MoviesAuthors.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Entities/MoviesAuthors.cs)   | Enriquece el modelo de datos para el proyecto Movie API definiendo relaciones entre películas y autores. Cada objeto `MoviesAuthor` contiene atributos como personaje, orden, autor y película, permitiendo una gestión fluida de conexiones multifacéticas dentro de la base de datos rica en contenido.                                                                                                                                      |

</details>

<details closed><summary>MoviesApi.Dto</summary>

| Archivo                                                                                                                 | Resumen                                                                                                                                                                                                                                                                                                                                                                          |
| ---                                                                                                                     | ---                                                                                                                                                                                                                                                                                                                                                                              |
| [CinemaDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CinemaDto.cs)                            | En el repositorio MoviesApi, la clase CinemaDto encapsula información esencial para cines como ID, nombre, latitud y longitud, sirviendo como un objeto de transferencia de datos que facilita una comunicación fluida entre capas dentro de la arquitectura de la aplicación.                                                                                                           |
| [CinemaNearDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CinemaNearDto.cs)                    | La clase CinemaNearDto presenta integración de datos basada en proximidad al combinar información esencial de Cinema con medición de distancia en metros, facilitando recomendaciones personalizadas de cines y optimizando la funcionalidad de búsqueda para los usuarios de MovieAPI.                                                                                                                     |
| [EditRolDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/EditRolDto.cs)                          | Este Dto permite la transformación de datos para actualizar información de roles. En la arquitectura de MoviesApi, `EditRolDto` acepta el ID del usuario y el nombre del rol deseado, facilitando las operaciones de modificación de roles sin problemas.                                                                                                                                                                  |
| [MovieDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/MovieDto.cs)                              | Una clase MovieDto codifica detalles de películas dentro de un objeto de transferencia de datos (DTO). En este proyecto MoviesApi, estructura los datos de las películas capturando atributos esenciales como Id, Title, estado InTheaters, ReleaseDate y URL del póster. Esto permite un intercambio de información eficiente entre los componentes de nuestra aplicación mientras se mantiene una clara separación de responsabilidades. |
| [CreateCinemaDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateCinemaDto.cs)                | Empodera a los usuarios para crear nuevos listados de cines con facilidad. Los detalles esenciales solicitados son el Nombre en forma de cadena (obligatorio) y las coordenadas representadas por Latitud y Longitud. Las comprobaciones de validación de datos aseguran una entrada precisa. Esto simplifica el proceso de creación de cines dentro de nuestra solución de API de películas.                                                                                   |
| [GenderDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/GenderDto.cs)                            | Garantiza una representación consistente de los tipos de género en las respuestas de la API. Este archivo, GenderDto, encapsula los campos de datos requeridos (Id, Name) con reglas de validación (Required, StringLength). Contribuye al modelo de interacción estructurado y eficiente de MoviesApi al facilitar el intercambio de datos entre la aplicación y los usuarios.                                                 |
| [CreateGenderDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateGenderDto.cs)                | Simplifica el manejo de datos para géneros de películas definiendo los atributos necesarios. En el repositorio `MoviesApi`, la clase `CreateGenderDto` encapsula la validación de entrada de nombre requerida para crear géneros dentro de la API.                                                                                                                                                     |
| [PaginationDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/PaginationDto.cs)                    | MoviesApi.Dto.PaginationDto Propósito: Implementa un objeto de transferencia de datos de paginación reutilizable para filtrar y limitar resultados de manera eficiente dentro de la aplicación MoviesAPI. Admite tamaños de página personalizables manteniendo un límite máximo de 50 registros por página.                                                                                                           |
| [MoviesIndexDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/MoviesIndexDto.cs)                  | En MoviesApi Dtos, la clase MoviesIndexDto agrega información crítica sobre lanzamientos futuros y los que están actualmente en los cines para una visualización eficiente dentro de la aplicación.                                                                                                                                                                                                     |
| [MoviePatchDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/MoviePatchDto.cs)                    | La clase `MoviePatchDto` maneja la transformación de datos para actualizaciones de películas en MoviesApi. Toma como entrada el título de la película (con validación de longitud) y el estado de teatro, facilitando actualizaciones sin problemas dentro de la infraestructura de la aplicación.                                                                                                                                           |
| [CreateAuthorMovieDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateAuthorMovieDto.cs)      | Facilita la creación de un registro de autor-película con los atributos necesarios (AuthorId, Character). Se integra dentro de la arquitectura más amplia de MoviesApi para la gestión y almacenamiento sin problemas de datos de películas.                                                                                                                                                                         |
| [AuthorDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/AuthorDto.cs)                            | Este objeto de transferencia de datos (AuthorDto) captura información esencial sobre autores de películas en la MoviesAPI, encapsulando su ID único, nombre, fecha de nacimiento y foto para un intercambio de datos sin problemas entre las capas de la aplicación.                                                                                                                                                |
| [FilterMovieDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/FilterMovieDto.cs)                  | Transforma solicitudes para filtrar películas dentro de una API, gestionando paginación, búsqueda por título, filtro por género y clasificación por estado de lanzamiento, asegurando una experiencia de usuario flexible. Esta clase simplifica el manejo de consultas complejas en múltiples páginas.                                                                                                                                    |
| [UserTokenDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/UserTokenDto.cs)                      | Empodera la autenticación segura de usuarios creando objetos UserTokenDto dentro de MoviesApi. Cada instancia contiene un token de acceso y un tiempo de expiración para una gestión eficiente de usuarios autorizados en toda la aplicación.                                                                                                                                                            |
| [UserDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/UserDto.cs)                                | Este Dto (Objeto de Transferencia de Datos) en el repositorio MoviesApi define una simple clase UserDto para estructurar y transportar información esencial del usuario, incluyendo Id y Correo electrónico. Al facilitar una comunicación eficiente entre diferentes capas de la aplicación, contribuye a interacciones de usuario sin problemas dentro de la arquitectura del sistema.                                          |
| [ReviewDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/ReviewDto.cs)                            | Simplifica la gestión de reseñas en la aplicación MoviesApi. La clase `ReviewDto` encapsula datos clave para reseñas, incluyendo comentario, puntuación y detalles relacionados con el usuario, permitiendo un almacenamiento y recuperación eficiente de datos de reseñas.                                                                                                                                              |
| [CinemaNearFilterDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CinemaNearFilterDto.cs)        | En este archivo de código, construimos un objeto CinemaNearFilterDto que empodera a los usuarios para buscar cines cercanos especificando coordenadas, distancia deseada (en km) y un límite en el radio máximo de búsqueda. Esto facilita proporcionar recomendaciones personalizadas y enriquece la experiencia general del usuario en la aplicación MoviesApi.                                         |
| [CreateReviewDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateReviewDto.cs)                | Empodera a los entusiastas del cine al permitir la creación de reseñas mediante API. La clase `CreateReviewDto` simplifica la entrada del usuario, asegurando puntuaciones de reseñas precisas y válidas (1-5) junto con un comentario descriptivo. Esta acción forma una parte crucial de la arquitectura de MoviesApi que mejora la interactividad de los usuarios en las críticas de películas.                                         |
| [UserInfoDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/UserInfoDto.cs)                        | Transforma datos de registro de usuarios en un formato manejable con la clase UserInfoDto, esencial para autenticar usuarios y asegurar que los campos requeridos (Correo electrónico, Contraseña) siempre se suministren dentro de la arquitectura de MoviesApi.                                                                                                                                                     |
| [AuthorPatchDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/AuthorPatchDto.cs)                  | ¡Empodera a los entusiastas del cine! Este DTO (AuthorPatchDto) refina los detalles del autor en el repositorio MoviesApi, permitiendo actualizaciones sin problemas de nombres y fechas de nacimiento dentro de la API de la aplicación. La estructura limpia y concisa asegura una experiencia optimizada para todos los usuarios que interactúan con esta plataforma centrada en el cine.                                                              |
| [CreateAuthorDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateAuthorDto.cs)                | Mejora las interacciones de los usuarios dentro de la plataforma MoviesAPI al permitir la entrada de datos para la foto de un autor mediante un archivo de formulario, adhiriéndose a las restricciones de tamaño y tipo de archivo establecidas para un manejo óptimo de imágenes.                                                                                                                                                                              |
| [CreateMovieDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/CreateMovieDto.cs)                  | Simplifica la entrada de datos para la creación de películas en la MoviesAPI, manejando la entrada para el archivo del póster de la película, la selección de géneros (a través de Ids) y autores asociados a través de objetos CreateAuthorMovieDto. Impone limitaciones de tamaño y tipo de archivo y utiliza funciones de enlace personalizadas para asegurar la integridad de los datos.                                                                           |
| [MovieDetailDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/MovieDetailDto.cs)                  | La clase MovieDetailDto simplifica la información de la película al incorporar atributos adicionales, como géneros y autores asociados, expandiéndose sobre el MovieDto básico. Esto facilita el manejo amigable de datos detallados de películas dentro de la arquitectura de MoviesAPI.                                                                                                      |
| [AuthorMovieDetailDto.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Dto/AuthorMovieDetailDto.cs)      | Un objeto de transferencia de datos personalizado (AuthorMovieDetailDto) para la comunicación eficiente entre la capa API y el nivel de datos. Consolida atributos esenciales del autor, incluyendo ID único, personaje interpretado y nombre del personaje. Permite una comprensión más clara y un procesamiento más rápido de las relaciones complejas entre películas y autores.                                                            |

</details>

<details closed><summary>MoviesApi.Migrations</summary>

| Archivo                                                                                                                                                                                    | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ---                                                                                                                                                                                     | ---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [20230710192706_Reviews.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710192706_Reviews.Designer.cs)                                         | MoviesApi/Migrations/20230710192706_Reviews.Designer.cs Este archivo de código pertenece a la carpeta de Migraciones del repositorio de Movie API, indicando que maneja las migraciones de la base de datos en esta aplicación. La característica principal aquí es la implementación de una migración llamada Reviews que tiene como objetivo crear, modificar o eliminar tablas relacionadas con las reseñas de usuarios dentro de ApplicationDbContext. Al gestionar la evolución y adaptación de estas estructuras de base de datos, esta migración contribuye a la flexibilidad, escalabilidad y resiliencia general de la aplicación Movie API. Esta migración específica de reseñas se ejecutó el 10 de julio de 2023. El código logra esto definiendo relaciones entre entidades existentes como reseñas de usuarios dentro de ApplicationDbContext y el modelo que se está construyendo por la clase ModelBuilder, con las anotaciones adecuadas para la versión del producto y otros detalles.                                                                                                                                                                                                                                                                                                                                                           |
| [20230709221834_CinemaLocation.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709221834_CinemaLocation.cs)                                             | Esta migración actualiza el esquema de la base de datos añadiendo una columna de coordenada geográfica (Ubicación) a la tabla de Cinema, permitiendo búsquedas espaciales de cines basadas en su ubicación física dentro de la aplicación. Además, define géneros predeterminados (Acción, Comedia, Drama) y los inserta en la tabla Genders durante las actualizaciones. Por el contrario, al revertir los cambios, esta migración elimina estos géneros definidos y elimina la columna Ubicación de la tabla Cinema.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [20230710142335_Cinema-Data.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710142335_Cinema-Data.Designer.cs)                                 | Establece relaciones de muchos a muchos entre las entidades `Author`, `Cinema`, `Gender` y `Movie`. Cada relación es bidireccional y utiliza la eliminación en cascada en las claves foráneas. Además, se configuran las propiedades de navegación para todas las relaciones.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [20230710192706_Reviews.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710192706_Reviews.cs)                                                           | Introduce una tabla para reseñas de usuarios dentro de la base de datos de películas, conectando cada reseña con un usuario individual y una película específica, agilizando el seguimiento de calificaciones y comentarios. Esta migración asegura una gestión escalable de datos a medida que la base de usuarios crece y evoluciona.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [20230710184849_AdminData.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710184849_AdminData.cs)                                                       | Inicializa y siembra datos de administrador dentro de la base de datos durante el proceso de migración en la aplicación MoviesApi, creando un rol de administrador, una cuenta de usuario y los reclamos correspondientes, reforzando el sistema de gestión de acceso basado en identidad para la aplicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [20230709170425_MoviesAuthors_MoviesGenders.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709170425_MoviesAuthors_MoviesGenders.Designer.cs) | Genera el esquema de la base de datos para la aplicación `MoviesApi`. Define tablas para las entidades `Author`, `Gender` y `Movie`, así como relaciones entre ellas. Establece claves foráneas y restricciones para asegurar la integridad de los datos. Soporta la relación de muchos a muchos entre películas y autores o géneros en el esquema de la base de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [20230708204143_Authors.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230708204143_Authors.Designer.cs)                                         | Este archivo de código contribuye al proyecto MoviesApi definiendo el esquema para las entidades Author y Gender dentro de ApplicationDbContext. Las tablas Authors y Genders se generan con las propiedades adecuadas, como Id (auto-increment), BirthdayDate, Name y Photo (para Authors), proporcionando una estructura robusta para almacenar y gestionar información de autores en la base de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [20230710175611_Identity.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710175611_Identity.Designer.cs)                                       | Este archivo de código, `MoviesApi/Migrations/20230710175611_Identity.Designer.cs`, es parte del repositorio `MoviesApi`, que es una aplicación Web API de .NET Core centrada en la gestión de datos de películas. Específicamente, este archivo desempeña un papel esencial en la gestión de actualizaciones del esquema de la base de datos para el `ApplicationDbContext`, que es el DbContext principal (o contexto de base de datos) para interactuar con la base de datos subyacente. El código crea o modifica tablas dentro de la base de datos según los cambios realizados en las estructuras de datos y clases de entidad de la aplicación a lo largo del tiempo. Utiliza Entity Framework Core (EFCore), un moderno y popular mapeador objeto-relacional de código abierto para .NET de Microsoft. En términos sencillos, EFCore ayuda a gestionar la interacción entre tu código y una base de datos, permitiendo operaciones CRUD sin problemas para las entidades o modelos de la aplicación, en este caso, datos relacionados con películas. La característica principal de este archivo es su método `BuildTargetModel`, que personaliza el esquema objetivo definiendo la estructura y relaciones dentro de la base de datos subyacente según lo especificado por las entidades definidas en otras partes del proyecto. Esto asegura que la base de datos se adhiera a los requisitos de la aplicación y cambie cuando esos requisitos evolucionen. |
| [20230706193553_Initial.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230706193553_Initial.cs)                                                           | Inicia el esquema de la tabla para la entidad Gender en la base de datos de MoviesAPI, permitiendo el almacenamiento y gestión de tipos de género dentro de la aplicación. Esta migración apoya la flexibilidad y escalabilidad en futuras operaciones de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [20230708204143_Authors.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230708204143_Authors.cs)                                                           | Introduce una nueva tabla `Authors` en la estructura de la base de datos, capturando detalles esenciales como Nombre, Fecha de Nacimiento y URL de la Foto. Esto empodera a MoviesAPI para gestionar de manera más efectiva a los creadores de películas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [20230708230015_Movies.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230708230015_Movies.cs)                                                             | Una nueva tabla Movies en el esquema de la base de datos de MoviesApi para almacenar datos de películas con columnas Id, Title, InTheaters, ReleaseDate y Poster. Esta migración también incluye reglas de clave primaria (PK_Movies) y de anulabilidad según lo definido por EntityFrameworkCore.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [20230709215643_Cinema.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709215643_Cinema.cs)                                                             | MoviesGenders, Authors, Genders, Movies. Elimina entradas con combinaciones de GenderId y MovieId coincidentes de la tabla MoviesGenders. Elimina autores y géneros especificados de sus respectivas tablas. También elimina películas con ids específicos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [20230710142335_Cinema-Data.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710142335_Cinema-Data.cs)                                                   | Inserta o elimina cines de la base de datos según las migraciones, mejorando la gestión de datos de cines de MovieAPI al definir su ubicación y nombres dentro de la base de datos geoespacial, facilitando capacidades de búsqueda de cines eficientes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [20230709221834_CinemaLocation.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709221834_CinemaLocation.Designer.cs)                           | Author, Cinema y Gender. Asegura la eliminación en cascada adecuada y las propiedades de navegación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [20230708230015_Movies.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230708230015_Movies.Designer.cs)                                           | En este script de migración para el repositorio de MoviesApi, se definen nuevas entidades `Author`, `Gender` y `Movie` con propiedades específicas. Esto sirve para dar forma al esquema de la base de datos según el diseño de la aplicación, asegurando una interacción fluida con los datos relacionados con películas dentro del servicio MoviesAPI.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [ApplicationDbContextModelSnapshot.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/ApplicationDbContextModelSnapshot.cs)                                     | En la estructura del repositorio de MoviesApi, el archivo crítico es `ApplicationDbContextModelSnapshot.cs` ubicado dentro de la carpeta de Migraciones. Este archivo de código gestiona y mantiene el esquema de la base de datos que soporta nuestra aplicación de API de películas (ApplicationDbContext). El papel principal de este archivo es asegurar la compatibilidad entre el esquema de la base de datos y las clases de entidad mediante la creación, alteración o eliminación de tablas según sea necesario basado en las actualizaciones realizadas a las entidades. Esto ayuda a mantener nuestra aplicación sincronizada con cualquier cambio realizado a su modelo de datos subyacente a lo largo del tiempo. Además, se adhiere a Entity Framework Core, un popular mapeador objeto-relacional (ORM), permitiéndonos usar objetos C# para interactuar con bases de datos SQL.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [20230710175611_Identity.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710175611_Identity.cs)                                                         | Users, Roles, UserRoles (muchos a muchos), RoleClaims, UserClaims, UserLogins y UserTokens; define restricciones de clave foránea, claves primarias e índices; proporciona migraciones up/down para fácil despliegue y reversión.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [20230710184849_AdminData.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230710184849_AdminData.Designer.cs)                                     | Este archivo de código, ubicado en `MoviesApi/Migrations/20230710184849_AdminData.Designer.cs`, es parte del repositorio MoviesAPI y sirve para crear y gestionar cambios en el esquema de la base de datos durante el desarrollo. Es esencial para gestionar el ApplicationDbContext, que almacena todos los datos de la aplicación, como películas, usuarios, etc., en un servidor SQL. Este archivo específico genera scripts de migración para configurar datos iniciales de administrador cuando sea necesario. En otras palabras, configura registros predefinidos para agilizar los procesos de desarrollo, como cuentas de administrador predeterminadas o catálogos de películas precargados. Esta migración se llama 20230710184849_AdminData' para identificar la fecha y propósito de este cambio específico en el control de versiones, lo cual es una práctica organizacional recomendada en proyectos de desarrollo a gran escala. Este archivo referencia bibliotecas críticas como NetTopologySuite para gestionar datos geográficos cuando sea aplicable. En general, este archivo asegura un flujo de desarrollo sin problemas con la configuración inicial de datos cuando se requiera.                                                                                                                                                                                                                               |
| [20230709215643_Cinema.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709215643_Cinema.Designer.cs)                                           | Este modelo de Entity Framework Core define relaciones de muchos a muchos entre la entidad `Movie` y otras tablas (Authors, Cinemas, Genders) a través de tablas de unión correspondientes. También especifica las navegaciones requeridas para que cada entidad acceda a las entidades relacionadas. El modelo utiliza la eliminación en cascada para mantener la integridad referencial al eliminar datos de una tabla.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [20230706193553_Initial.Designer.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230706193553_Initial.Designer.cs)                                         | Inicializa el esquema de entidad para el proyecto MovieAPI definiendo la estructura de la tabla Gender con las columnas Id (Auto-Incrementado) y Name, adhiriéndose a los estándares de bases de datos relacionales y usando Entity Framework Core.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [20230709170425_MoviesAuthors_MoviesGenders.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Migrations/20230709170425_MoviesAuthors_MoviesGenders.cs)                   | Este archivo de migración establece nuevas tablas `MoviesAuthors` y `MoviesGenders` en la base de datos de MoviesApi, conectando películas con sus autores y géneros, respectivamente. El objetivo es mapear las relaciones entre entidades para una recuperación más fácil, mejorando la integridad y eficiencia de los datos dentro del sistema MovieAPI.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

</details>

<details closed><summary>MoviesApi.Properties</summary>

| Archivo                                                                                                              | Resumen                                                                                                                                                                                                                                                                                                                                  |
| ---                                                                                                               | ---                                                                                                                                                                                                                                                                                                                                      |
| [launchSettings.json](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Properties/launchSettings.json) | Define dos perfiles (Development y IIS Express)* Establece la URL de la aplicación para ambos entornos* Habilita la autenticación anónima en el entorno de Development* Inicializa el proyecto con el comando dotnet run y abre el navegador predeterminado con el endpoint de la API para el recurso de géneros* Permite ajustar la variable de entorno ASPNETCORE_ENVIRONMENT. |

</details>

<details closed><summary>MoviesApi.Helpers</summary>

| Archivo                                                                                                                     | Resumen                                                                                                                                                                                                                                                                                                                                                              |
| ---                                                                                                                      | ---                                                                                                                                                                                                                                                                                                                                                                  |
| [MovieExistAttribute.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Helpers/MovieExistAttribute.cs)     | El `MovieExistAttribute` ayuda a asegurar que cada ID de película solicitado exista en la base de datos antes de procesar la solicitud. Al hacer esto, la aplicación previene errores no intencionados como obtener o manipular registros de películas que no existen, mejorando la confiabilidad de la API.                                                                             |
| [AutoMapperProfiles.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Helpers/AutoMapperProfiles.cs)       | Transforma datos entre modelos (Dto, Entidades, GenderDto) para un uso eficiente dentro de la aplicación MoviesApi. Al emplear perfiles de AutoMapper, simplifica la interacción entre diferentes entidades al mapear los datos de acuerdo y automatizar el proceso.                                                                                                             |
| [HttpContextExtensions.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Helpers/HttpContextExtensions.cs) | Empodera la paginación dinámica en toda la aplicación MoviesApi. La clase de ayuda proporcionada, `HttpContextExtensions`, permite establecer el número de páginas en una Respuesta HTTP calculándolo en función de la cantidad de registros devueltos y la cantidad de registros por página definida por el usuario. Esto optimiza el uso de recursos y la experiencia del usuario al acceder a grandes conjuntos de datos. |
| [QueryableExtensions.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Helpers/QueryableExtensions.cs)     | Implementado como método Paginate en `QueryableExtensions`. Permite a los desarrolladores gestionar y recuperar datos de películas página por página fácilmente según los parámetros de paginación proporcionados, mejorando la experiencia del usuario para la aplicación Movie API.                                                                                                                                          |
| [TypeBinder.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Helpers/TypeBinder.cs)                       | La clase `TypeBinder<T>` en Helpers de MoviesApi simplifica el manejo de tipos de datos complejos al convertir automáticamente cadenas JSON en objetos de tipo especificado durante la vinculación de modelos en ASP.NET Core, asegurando así un procesamiento eficiente de datos y respuestas de API amigables para el usuario.                                                                                       |

</details>

<details closed><summary>MoviesApi.Validations</summary>

| Archivo                                                                                                                   | Resumen                                                                                                                                                                                                                                                                  |
| ---                                                                                                                    | ---                                                                                                                                                                                                                                                                      |
| [SizeFileValidation.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Validations/SizeFileValidation.cs) | Este atributo de validación personalizado asegura que el tamaño de cada archivo cargado no exceda el límite predefinido en megabytes (MB) para una experiencia de usuario más fluida y una gestión eficiente del servidor.                                                                               |
| [TypeFileValidation.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Validations/TypeFileValidation.cs) | Esta clase de Validación, ubicada en el proyecto MoviesApi, valida los tipos de archivo cargados por el usuario para conformarse con extensiones específicas. Asegura que el contenido enviado solo incluya imágenes (por ejemplo, .jpeg, .png o .gif) salvaguardando así la integridad de los datos de la API. |
| [GroupTypeFile.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Validations/GroupTypeFile.cs)           | Este enum `GroupTypeFile` potencia la MoviesApi definiendo y categorizando los archivos cargados según el tipo, particularmente imágenes, simplificando la gestión de archivos dentro de la arquitectura de la aplicación.                                                                        |

</details>

<details closed><summary>MoviesApi.Controllers</summary>

| Archivo                                                                                                                       | Resumen                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ---                                                                                                                        | ---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [MoviesController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/MoviesController.cs)         | La API gestiona películas mediante la obtención de detalles (GET), la creación de nuevas entradas (POST), la actualización (PUT), las modificaciones parciales (PATCH) y la eliminación de entradas (DELETE). La API maneja relaciones con autores y géneros a través de Includes, mapea modelos usando AutoMapper y almacena contenido de archivos mediante FileStorage para la imagen del póster de las películas.                                                                                                                                                                                                            |
| [AuthorsController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/AuthorsController.cs)       | Gestiona las operaciones CRUD para los recursos de Autor dentro de la aplicación Movies API. Utiliza la inyección de dependencias para interactuar con el contexto de datos subyacente y los servicios de almacenamiento de archivos. Implementa endpoints RESTful para crear, recuperar, actualizar y eliminar instancias de Autor según las solicitudes del usuario. Utiliza AutoMapper para una conversión eficiente entre DTOs y entidades.                                                                                                                                        |
| [CustomBaseController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/CustomBaseController.cs) | Este CustomBaseController sirve como la base para los endpoints de la API dentro del proyecto MoviesApi. Simplifica las operaciones de base de datos al abstraer las funciones CRUD (Crear, Leer, Actualizar, Eliminar) utilizando Entity Framework Core y AutoMapper. Esto permite un manejo fácil de las entidades de datos de manera consistente y eficiente, mejorando la mantenibilidad y legibilidad.                                                                                                                                                     |
| [AccountsController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/AccountsController.cs)     | El archivo `AccountsController.cs` dentro del proyecto `MoviesApi` gestiona la autenticación de usuarios para una API. Maneja la creación de nuevos usuarios, inicio de sesión, actualización de tokens y la obtención de una lista de usuarios para administradores, con funcionalidad de asignación y eliminación de roles para usuarios autorizados con el rol de Administrador.                                                                                                                                                                                                                    |
| [ReviewController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/ReviewController.cs)         | Gestiona y procesa las reseñas de usuarios para películas específicas en una aplicación web, aprovechando modelos de datos, mapeadores, autenticación y autorización para asegurar una interacción segura y sin problemas. Las funciones clave incluyen la creación, actualización, eliminación y recuperación de reseñas de películas desde una base de datos a través de varios verbos HTTP.                                                                                                                                                                                                 |
| [CinemasController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/CinemasController.cs)       | Gestiona operaciones CRUD (Crear, Leer, Actualizar, Eliminar) en entidades de Cine en la base de datos de Movies API. Facilita búsquedas de cines basadas en geolocalización con opciones de filtro como distancia y ubicación del usuario. Utiliza AutoMapper para convertir DTOs y Entidades. Interactúa con ApplicationDbContext para ejecutar consultas, asegurando la consistencia de los datos y el esquema correcto.                                                                                                                                                                    |
| [GendersController.cs](https://github.com/juansdev/moviesapi/blob/master/MoviesApi/Controllers/GendersController.cs)       | Gestiona las interacciones de datos de géneros dentro de la API de Movies. Este controlador, específicamente GendersController, maneja todas las solicitudes HTTP relacionadas con géneros, incluyendo operaciones Get, Post, Put y Delete. Al aprovechar la inyección de dependencias, interactúa con objetos Dto y Entidad de manera fluida, asegurando una interfaz consistente entre las solicitudes del front-end y las estructuras de datos del back-end. Además, el control de acceso se mantiene a través del atributo [Authorize] para operaciones de eliminación, que requiere autenticación JWT. |

</details>

---

##  Primeros Pasos

**Requerimientos del Sistema:**

* **CSharp**: `versión 10`
* **.NET**: `versión 6`

###  Instalación

<h4>Desde <code>source</code></h4>

> 1. Clona el repositorio moviesapi:
>
> ```console
> $ git clone https://github.com/juansdev/moviesapi
> ```
>
> 2. Cambia al directorio del proyecto:
> ```console
> $ cd moviesapi
> ```
>
> 3. Instala las dependencias:
> ```console
> $ dotnet build
> ```
>
> 4. Edite la conexión a su BD de Microsoft SQL Server en la llave "DefaultConnection" alojada en el archivo MoviesApi/appsettings.Development.json.
>
> 5. Active el Servidor Microsoft SQL.
>
> 6. Ejecutar las migraciones mediante el comando "update-database"
> 
> 7. Edite la conexión a su Almacenamiento de Azure en la llave "AzureStorage".

###  Uso

<h4>Desde <code>source</code></h4>

> Despliega moviesapi usando el comando debajo:
> ```console
> $ dotnet run
> ```

###  Pruebas

> Ejecuta el conjunto de pruebas utilizando el siguiente comando:
> ```console
> $ dotnet test
> ```
